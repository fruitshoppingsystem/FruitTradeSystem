<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户注册</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/bootstrap.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.min.js"></script>
</head>
<body style="margin:50px">
<div class="row" style="margin-top:200px;" id="userRegisterDiv">
    <form>
    <div class="col-md-6 col-md-offset-3" >
        <div class="well col-md-12">
            <h3 align="center">用户注册</h3>
            <div class="input-group input-group-md">
                <span class="input-group-addon" id="sizing-addon1"><i class="glyphicon glyphicon-folder-close" aria-hidden="true"></i></span>
                <input id="uEmail" type="email" class="form-control" placeholder="输入邮箱" aria-describedby="sizing-addon1" onblur="checkEmail()">
                <label id="email_trip"></label>
            </div>
            <div class="input-group input-group-md">
                <span class="input-group-addon" id="sizing-addon2"><i class="glyphicon glyphicon-user" aria-hidden="true"></i></span>
                <input id="uName" type="text" class="form-control" placeholder="输入用户名" aria-describedby="sizing-addon2" onblur="checkName()">
                <label id="name_trip"></label>
            </div>
            <div class="input-group input-group-md">
                <span class="input-group-addon" id="sizing-addon3"><i class="glyphicon glyphicon-lock"></i></span>
                <input id="uPassword" type="password" class="form-control" placeholder="输入密码" aria-describedby="sizing-addon3" onblur="checkPassword()">
                <label id="password_trip"></label>
            </div>
            <div class="input-group input-group-md">
                <span class="input-group-addon" id="sizing-addon4"><i class="glyphicon glyphicon-lock"></i></span>
                <input id="uSurePassword" type="password" class="form-control" placeholder="重新输入密码" aria-describedby="sizing-addon4" onblur="checkSurePassword()">
                <label id="surePassword_trip"></label>
            </div>
            <br />
            <div>
                <input id="register" type="submit" class="btn bg-success btn-block" onblur="checkForm()" onclick="return submitT()" value="注册">
                <input type="reset" class="btn bg-success btn-block" value="重置">
            </div>

            <div style="text-align: center; margin-top: 10px;">
                <a href="index.html"><button class="btn btn-info">返回首页</button></a>
                <a href="login.html"><button class="btn btn-info">去登录</button></a>
            </div>
        </div>
    </div>
    </form>
</div>
</body>
<script type="text/javascript">
    function trip(obj, trip) {
        document.getElementById(obj).innerHTML = "<b>" + trip + "</b>";
    }

    function checkForm() {
        checkEmail();
        checkName();
        checkPassword();
        checkSurePassword();
    }

    function checkEmail() {
        //校验邮箱:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/
        var inputEmail = document.getElementById("uEmail");
        var uEmail = inputEmail.value;
        if (!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(uEmail)) {
            trip("email_trip", "邮箱不合法!!");
            return false;
        } else {
            trip("email_trip", "√");
            return true;
        }
    }

    function checkName() {
        //获取用户名输入项
        var userNname = document.getElementById("uName");
        var uName = userNname.value;
        if (uName.length < 1 || uName.length > 10) {

            trip("name_trip", "账号长度为1-10位!!");
            return false;
        } else {
            trip("name_trip", "√");
            return true;
        }
    }

    function checkPassword() {
        //密码长度大于6 和确认必须一致
        var password = document.getElementById("uPassword");
        var userPass = password.value;
        if (userPass.length < 6|| userPass.length > 18) {
            trip("password_trip", "密码为6~18位大大小写数字特殊符号组合!!");
            return false;
        } else {
            trip("password_trip", "√");
            return true;
        }
    }

    function checkSurePassword() {
        //获取确认密码框的值 var
        var password = document.getElementById("uPassword");
        var userPass = password.value;
        var surePassword = document.getElementById("uSurePassword");
        var surePass = surePassword.value;
        if (userPass.trim() !== surePass.trim()) {
            trip("surePassword_trip", "两次密码不一致!!");
            return false;
        }else {
            trip("surePassword_trip", "√");
            return true;
        }
    }
    function submitT() {
        if (checkForm()){
            var uEmail=$("#uEmail").val();
            var uName=$("#uName").val();
            var uPassword=$("#uPassword").val();
            $.ajax({ url: "userRegisterController", data:{"uEmail":uEmail,"uName":uName,"uPassword":uPassword}
            , success: function(){
                alert("注册成功！")
            }, error: function () {
                alert("注册失败！")
            }
            });
        }
        return checkForm();
    }
</script>
</html>
